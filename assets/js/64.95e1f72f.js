(window.webpackJsonp=window.webpackJsonp||[]).push([[64],{523:function(t,s,e){"use strict";e.r(s);var a=e(28),n=Object(a.a)({},(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"indexed-db-api"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#indexed-db-api"}},[t._v("#")]),t._v(" Indexed DB API")]),t._v(" "),e("p",[t._v("The "),e("code",[t._v("IndexedDB API")]),t._v(" gives us the ability to create local document databases that are accessible with JavaScript through either a script that is attached to an HTML file or through a Service Worker.")]),t._v(" "),e("h2",{attrs:{id:"indexeddb-libraries"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#indexeddb-libraries"}},[t._v("#")]),t._v(" IndexedDB Libraries")]),t._v(" "),e("p",[t._v("There are a number of libraries that have been created to allow us to manage and use IndexedDB databases. Too many to cover here in fact.")]),t._v(" "),e("p",[t._v("However, if you only want to use your IndexedDB database like you have used LocalStorage or SessionStorage then a good choice is "),e("a",{attrs:{href:"https://github.com/jakearchibald/idb-keyval",target:"_blank",rel:"noopener noreferrer"}},[t._v("Jake Archibald's idb-key library"),e("OutboundLink")],1),t._v(".")]),t._v(" "),e("p",[t._v("It gives us a small number of methods and works with Promises so we can chain methods with "),e("code",[t._v("then()")]),t._v(" methods. It treats all the stores like key-value pairs like LocalStorage does.")]),t._v(" "),e("p",[t._v("Watch this video for a complete overview.")]),t._v(" "),e("YouTube",{attrs:{title:"Idb-keyval library",url:"https://www.youtube.com/embed/6fK1K28eoUA"}}),t._v(" "),e("p",[t._v("Here are some of the main methods for "),e("code",[t._v("idb-keyval")]),t._v(":")]),t._v(" "),e("div",{staticClass:"language-js line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("set")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'mykey'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'my value'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Success'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'mykey'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("val")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'The value for mykey is'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" val"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("setMany")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'key1'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'key2'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'hello'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'world'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'success'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("getMany")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'key1'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'key2'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("values")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//values is an array of values for those keys")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("delete")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'key1'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'success deleting'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br"),e("span",{staticClass:"line-number"},[t._v("9")]),e("br"),e("span",{staticClass:"line-number"},[t._v("10")]),e("br"),e("span",{staticClass:"line-number"},[t._v("11")]),e("br"),e("span",{staticClass:"line-number"},[t._v("12")]),e("br"),e("span",{staticClass:"line-number"},[t._v("13")]),e("br"),e("span",{staticClass:"line-number"},[t._v("14")]),e("br"),e("span",{staticClass:"line-number"},[t._v("15")]),e("br"),e("span",{staticClass:"line-number"},[t._v("16")]),e("br"),e("span",{staticClass:"line-number"},[t._v("17")]),e("br"),e("span",{staticClass:"line-number"},[t._v("18")]),e("br"),e("span",{staticClass:"line-number"},[t._v("19")]),e("br"),e("span",{staticClass:"line-number"},[t._v("20")]),e("br"),e("span",{staticClass:"line-number"},[t._v("21")]),e("br"),e("span",{staticClass:"line-number"},[t._v("22")]),e("br")])]),e("h2",{attrs:{id:"vanilla-js-and-the-indexeddb-api"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#vanilla-js-and-the-indexeddb-api"}},[t._v("#")]),t._v(" Vanilla JS and the IndexedDB API")]),t._v(" "),e("p",[t._v("Once we move beyond simple key value pairs then it's better to switch libraries or write our own scripts with the built-in "),e("code",[t._v("IndexedDB API")]),t._v(".")]),t._v(" "),e("p",[t._v("Here is the first of the 8 videos in the playlist about IndexedDB.")]),t._v(" "),e("YouTube",{attrs:{title:"IndexedDB API Part 1",url:"https://www.youtube.com/embed/gb5ovg7YCig"}}),t._v(" "),e("p",[e("a",{attrs:{href:"https://www.youtube.com/watch?v=gb5ovg7YCig&list=PLyuRouwmQCjmNyAysdqjNz5fIS5cYU4vi&index=2",target:"_blank",rel:"noopener noreferrer"}},[t._v("Full IndexedDB Playlist"),e("OutboundLink")],1)]),t._v(" "),e("h2",{attrs:{id:"core-concepts"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#core-concepts"}},[t._v("#")]),t._v(" Core Concepts")]),t._v(" "),e("p",[t._v("When writing your own code to work with IndexedDB, it is not any harder than using a library, it just means that you have to add your own functions for handling the success, complete, and error events.")]),t._v(" "),e("p",[e("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/API/IndexedDB_API",target:"_blank",rel:"noopener noreferrer"}},[t._v("MDN IndexedDB Reference section"),e("OutboundLink")],1)]),t._v(" "),e("h3",{attrs:{id:"structure"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#structure"}},[t._v("#")]),t._v(" Structure")]),t._v(" "),e("p",[t._v("An IndexedDB is a document database. That means that the data tends to be in the form of "),e("code",[t._v("Object")]),t._v("s or "),e("code",[t._v("Arrays")]),t._v(". You can still store simple primitives like "),e("code",[t._v("String")]),t._v("s, "),e("code",[t._v("Number")]),t._v("s, and "),e("code",[t._v("Boolean")]),t._v("s. With IndexedDB you can "),e("strong",[t._v("also")]),t._v(" store Binary data like images or other files.")]),t._v(" "),e("p",[t._v("The "),e("code",[t._v("database")]),t._v("s are bound to an origin (domain, protocol, and port).")]),t._v(" "),e("p",[t._v("You are allowed to have multiple "),e("code",[t._v("database")]),t._v("s per origin.")]),t._v(" "),e("p",[t._v("Inside a database you can have one or more "),e("code",[t._v("stores")]),t._v(".")]),t._v(" "),e("p",[t._v("Each "),e("code",[t._v("store")]),t._v(" is a collection of "),e("code",[t._v("Object")]),t._v("s.")]),t._v(" "),e("h3",{attrs:{id:"opening-and-updating-databases-stores"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#opening-and-updating-databases-stores"}},[t._v("#")]),t._v(" Opening and Updating Databases & Stores")]),t._v(" "),e("p",[t._v("The methods used for communicating with the databases and stores have events that can be accessed through callback functions.")]),t._v(" "),e("p",[t._v("To use a database you need to call the "),e("code",[t._v("indexedDB.open(name, ver)")]),t._v(" method. It accepts a name "),e("code",[t._v("String")]),t._v(" and a version "),e("code",[t._v("Number")]),t._v(" as arguments. The method returns an "),e("code",[t._v("IDBOpenDBRequest")]),t._v(" object. This object has three events - "),e("code",[t._v("success")]),t._v(", "),e("code",[t._v("error")]),t._v(" and "),e("code",[t._v("upgradeneeded")]),t._v(".")]),t._v(" "),e("p",[t._v("The "),e("code",[t._v("success")]),t._v(" event fires when the database has successfully finished opening. This is when you would be able to save a global reference to the database in a global variable.")]),t._v(" "),e("p",[t._v("The "),e("code",[t._v("error")]),t._v(" event fires when there is ANY problem opening the database.")]),t._v(" "),e("p",[t._v("The "),e("code",[t._v("upgradeneeded")]),t._v(" event fires when you call the "),e("code",[t._v("indexedDB.open()")]),t._v(" method with a different version number than what exists. This includes the first time you open the database. This is the ONLY place where you are allowed to create "),e("code",[t._v("stores")]),t._v(", delete "),e("code",[t._v("stores")]),t._v(", or create "),e("code",[t._v("indexes")]),t._v(". Basically, any time you want to change the structure of your database, this event handler function is the place to do it.")]),t._v(" "),e("h3",{attrs:{id:"transactions-and-requests"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#transactions-and-requests"}},[t._v("#")]),t._v(" Transactions and Requests")]),t._v(" "),e("p",[t._v("Any time you want to work with the data in your "),e("code",[t._v("stores")]),t._v(" - Create, Read, Update, or Delete - you do this through a "),e("code",[t._v("Request")]),t._v(". Every "),e("code",[t._v("Request")]),t._v(" or group of "),e("code",[t._v("Request")]),t._v("s "),e("strong",[t._v("must")]),t._v(" to be wrapped inside a "),e("code",[t._v("Transaction")]),t._v(".")]),t._v(" "),e("p",[t._v("A "),e("code",[t._v("transaction")]),t._v(" is create by calling the "),e("code",[t._v("db.transaction(store(s), mode)")]),t._v(" method on your database object. It takes, as its first argument, either a store name "),e("code",[t._v("String")]),t._v(" or an Array of store name "),e("code",[t._v("String")]),t._v("s. The second argument is the purpose of the transaction. It must be either "),e("code",[t._v("readonly")]),t._v(" or "),e("code",[t._v("readwrite")]),t._v(".")]),t._v(" "),e("p",[t._v("The "),e("code",[t._v("transaction")]),t._v(" object returned from the "),e("code",[t._v("db.transaction()")]),t._v(" method has two events - "),e("code",[t._v("error")]),t._v(" and "),e("code",[t._v("complete")]),t._v(". The "),e("code",[t._v("error")]),t._v(" event is pretty obvious. The "),e("code",[t._v("complete")]),t._v(" event means that ALL the "),e("code",[t._v("request")]),t._v("s inside the "),e("code",[t._v("transaction")]),t._v(" have completed successfully. This is usually a good place to put your code that moves on to the next step in your business logic.")]),t._v(" "),e("p",[t._v("The "),e("code",[t._v("IDBRequest")]),t._v(" objects inside every transaction have two events - "),e("code",[t._v("error")]),t._v(" and "),e("code",[t._v("success")]),t._v(". Again, the "),e("code",[t._v("error")]),t._v(" is pretty self explanatory. The "),e("code",[t._v("success")]),t._v(" event handler function is where you would get access to the data that was retrieved through a read operation. For create, update, and delete operations you can use the "),e("code",[t._v("success")]),t._v(" event to track your progress through the transaction and to inform the user.")]),t._v(" "),e("YouTube",{attrs:{title:"IDB transactions and requests - part 2",url:"https://www.youtube.com/embed/PqqkL_Lg41k"}}),t._v(" "),e("h3",{attrs:{id:"crud-methods"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#crud-methods"}},[t._v("#")]),t._v(" CRUD Methods")]),t._v(" "),e("p",[t._v("CRUD is a common acronym used with databases. It refers to the four main actions that you can do with any database - Create, Read, Update, and Delete. In Relational Databases, you would use the "),e("code",[t._v("SQL")]),t._v(" Structured Query Language, and call the commands "),e("code",[t._v("insert")]),t._v(", "),e("code",[t._v("select")]),t._v(", "),e("code",[t._v("update")]),t._v(" and "),e("code",[t._v("delete")]),t._v(".")]),t._v(" "),e("p",[t._v("With IndexedDB we have the following commands.")]),t._v(" "),e("div",{staticClass:"language-js line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//CREATE")]),t._v("\nstore"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("key"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" obj"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//insert an object. Fail if the key exists")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//READ")]),t._v("\nstore"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("key"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//get the first object where the key matches")]),t._v("\nstore"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("getAll")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("key "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" keyrange"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//get all the objects that match")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//UPDATE")]),t._v("\nstore"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("put")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("key"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" obj"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//update. Overwrite if key exists. Insert if not.")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//DELETE")]),t._v("\nstore"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("delete")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("key "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" keyrange"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//delete an object(s)")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br"),e("span",{staticClass:"line-number"},[t._v("9")]),e("br")])]),e("p",[t._v("Notice how each of these commands has a variable "),e("code",[t._v("store")]),t._v(" in front?")]),t._v(" "),e("p",[t._v("Each time you want to run one of these commands you need to create a transaction, then get a reference to a specific "),e("code",[t._v("store")]),t._v(" and then you can call the specific CRUD method.")]),t._v(" "),e("p",[t._v("Every one of those methods will return a "),e("code",[t._v("IDBRequest")]),t._v(" object that represents the request to carry out the CRUD operation.")]),t._v(" "),e("p",[t._v("Here is a more complete example:")]),t._v(" "),e("div",{staticClass:"language-js line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" tx "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" db"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("transaction")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'myStore'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'readwrite'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" store "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" tx"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("objectStore")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'myStore'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" req "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" store"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'someKey'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nreq"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("addEventListener")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'success'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("ev")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//ev.target is the same as req")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" result "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" ev"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("target"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("result"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//result is the object we requested from the store.")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nreq"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("onerror")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("err")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//an error happened to the request.")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br"),e("span",{staticClass:"line-number"},[t._v("9")]),e("br"),e("span",{staticClass:"line-number"},[t._v("10")]),e("br"),e("span",{staticClass:"line-number"},[t._v("11")]),e("br")])]),e("p",[t._v("The example above shows both ways you can write the event listener functions. "),e("code",[t._v("onerror")]),t._v(" and "),e("code",[t._v("onsuccess")]),t._v(" or "),e("code",[t._v("addEventListener('success', func)")]),t._v(" and "),e("code",[t._v("addEventListener('err', func)")]),t._v(". You can use either.")]),t._v(" "),e("p",[t._v("If the "),e("code",[t._v("error")]),t._v(" event fires, it will trigger the "),e("code",[t._v("transaction")]),t._v(" "),e("code",[t._v("error")]),t._v(" event.")]),t._v(" "),e("p",[t._v("If the "),e("code",[t._v("success")]),t._v(" event fires, it will trigger the "),e("code",[t._v("transaction")]),t._v(" "),e("code",[t._v("complete")]),t._v(" event.")]),t._v(" "),e("p",[t._v("If you call the "),e("code",[t._v("get")]),t._v(" method, then the "),e("code",[t._v("ev.target.result")]),t._v(" value will be the single object that had the matching key.")]),t._v(" "),e("p",[t._v("If you call the "),e("code",[t._v("getAll")]),t._v(" method, then the "),e("code",[t._v("ev.target.result")]),t._v(" object will be an "),e("code",[t._v("Array")]),t._v(", regardless of the number of records returned.")]),t._v(" "),e("p",[t._v("If there are no matching keys for "),e("code",[t._v("get")]),t._v(" or "),e("code",[t._v("getAll")]),t._v(" the "),e("code",[t._v("success")]),t._v(" event still fires. This is not an error. This is an empty result set.")]),t._v(" "),e("YouTube",{attrs:{title:"IDB get, getAll - part 3",url:"https://www.youtube.com/embed/y--Rjq6QV_o"}}),t._v(" "),e("YouTube",{attrs:{title:"IDB Add, put, delete - part 4",url:"https://www.youtube.com/embed/8UFOSQXT_pg"}}),t._v(" "),e("h3",{attrs:{id:"keyranges"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#keyranges"}},[t._v("#")]),t._v(" KeyRanges")]),t._v(" "),e("p",[t._v("When you want to bring back one or more records that match a range of keys then you can define an "),e("code",[t._v("IDBKeyRange")]),t._v(" object to explain the possible range of values to match against.")]),t._v(" "),e("p",[t._v("Keys in a "),e("code",[t._v("store")]),t._v(" can be a "),e("code",[t._v("Number")]),t._v(", an "),e("code",[t._v("Array")]),t._v(", or a "),e("code",[t._v("String")]),t._v(". When you pass the value of a key to the "),e("code",[t._v("get")]),t._v(" method it "),e("strong",[t._v("MUST")]),t._v(" be an exact match for the value and datatype. Think JavaScript "),e("code",[t._v("===")]),t._v(".")]),t._v(" "),e("p",[t._v("To create a key we can call one of the following methods.")]),t._v(" "),e("div",{staticClass:"language-js line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[t._v("IDBKeyRange"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("lowerBound")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("keyval"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nIDBKeyRange"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("upperBound")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("keyval"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nIDBKeyRange"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("bound")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("lowerKeyval"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" upperKeyval"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nIDBKeyRange"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("only")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("keyval"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//same as using a single key")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br")])]),e("p",[t._v("The "),e("code",[t._v("upperBound")]),t._v(" and "),e("code",[t._v("lowerBound")]),t._v(" methods let you provide either a max or a min value for the keys to match.")]),t._v(" "),e("p",[t._v("The "),e("code",[t._v("bound")]),t._v(" method lets you provide a min and max value for matching keys.")]),t._v(" "),e("p",[t._v("The true and false values represent whether or not you want to omit the value(s) provided in the keyval arguments. "),e("code",[t._v("false")]),t._v(" means that you want to include the value.")]),t._v(" "),e("p",[e("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/API/IDBKeyRange",target:"_blank",rel:"noopener noreferrer"}},[t._v("KeyRange reference"),e("OutboundLink")],1)]),t._v(" "),e("h3",{attrs:{id:"indexes"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#indexes"}},[t._v("#")]),t._v(" Indexes")]),t._v(" "),e("p",[t._v("An "),e("code",[t._v("index")]),t._v(" can be created whenever you update a database's structure.")]),t._v(" "),e("p",[t._v("Think of it as an extra column that is created with a sorted version of one of the properties. When you want to apply a "),e("code",[t._v("IDBKeyRange")]),t._v(" for a "),e("code",[t._v("getAll")]),t._v(" or "),e("code",[t._v("update")]),t._v(" or "),e("code",[t._v("delete")]),t._v(" you need to have things sorted based on the property you are comparing to the key range.")]),t._v(" "),e("p",[t._v("You "),e("strong",[t._v("can")]),t._v(" create an index for every property but that is wasteful. Only create indexes for the properties that you will use for a "),e("code",[t._v("getAll")]),t._v(" or "),e("code",[t._v("update")]),t._v(" or "),e("code",[t._v("delete")]),t._v(".")]),t._v(" "),e("p",[t._v("To create an index we use this method inside our "),e("code",[t._v("upgradeneeded")]),t._v(" event handler function:")]),t._v(" "),e("div",{staticClass:"language-js line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[t._v("objectStore"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("createIndex")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'priceIDX'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'price'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" unique"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br")])]),e("p",[t._v("The first argument is the label we are giving our new index column.")]),t._v(" "),e("p",[t._v("The second argument is the property that will/does exist in our data.")]),t._v(" "),e("p",[t._v("The third argument is our options object. We need to specify if the values of our property are required to be unique or not. In this case we are saying that the values in the price property are allowed to be duplicates.")]),t._v(" "),e("p",[t._v("Once you have an index, then you can use it in place of a store object for creating the "),e("code",[t._v("IDBRequest")]),t._v("s in your transaction. Here is an example that creates a "),e("code",[t._v("transaction")]),t._v(" and then makes a request for all the objects from our "),e("code",[t._v("store")]),t._v(" that match a price between $50 and $100, inclusive. The example uses a "),e("code",[t._v("IDBKeyRange")]),t._v(" as well as the index created above.")]),t._v(" "),e("div",{staticClass:"language-js line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" tx "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" db"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("transaction")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'myStore'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'readonly'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" store "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" tx"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("objectStore")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'myStore'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" idx "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" store"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("index")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'priceIDX'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" range "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" IDBKeyRange"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("bound")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("50")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" req "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" idx"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("getAll")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("range"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nreq"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("onsuccess")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("ev")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" result "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" ev"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("target"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("result"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  result"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("forEach")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("obj")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("obj"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//console each of the objects that matched.")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br"),e("span",{staticClass:"line-number"},[t._v("9")]),e("br"),e("span",{staticClass:"line-number"},[t._v("10")]),e("br"),e("span",{staticClass:"line-number"},[t._v("11")]),e("br")])]),e("YouTube",{attrs:{title:"IDB Creating Indexes - part 6",url:"https://www.youtube.com/embed/sEzzowrLpYs"}}),t._v(" "),e("YouTube",{attrs:{title:"IDB Using Indexes - part 7",url:"https://www.youtube.com/embed/b-7qcQvgv_U"}}),t._v(" "),e("h3",{attrs:{id:"cursors"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#cursors"}},[t._v("#")]),t._v(" Cursors")]),t._v(" "),e("p",[t._v("A cursor provides another way that we would move through the resulting recordset from a data request. It lets us provide a direction to move through the results - "),e("code",[t._v("next")]),t._v(", "),e("code",[t._v("nextunique")]),t._v(", "),e("code",[t._v("prev")]),t._v(", or "),e("code",[t._v("prevunique")]),t._v(".")]),t._v(" "),e("p",[t._v("It uses an "),e("code",[t._v("openCursor(key|range, direction)")]),t._v(" method to create the cursor. The cursor has a "),e("code",[t._v("success")]),t._v(" and an "),e("code",[t._v("error")]),t._v(" event. Each time the "),e("code",[t._v("success")]),t._v(" event fires it means that the next record is available. You will always get one record at a time. The "),e("code",[t._v("success")]),t._v(" event will fire one last time to say that the records have all be traversed.")]),t._v(" "),e("p",[t._v("The "),e("code",[t._v("openCursor(key|range, direction)")]),t._v(" method can be called on either a "),e("code",[t._v("store")]),t._v(" or an "),e("code",[t._v("index")]),t._v(" object.")]),t._v(" "),e("div",{staticClass:"language-js line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[t._v("idx"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("openCursor")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("range"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'next'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("onsuccess")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("ev")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" cursor "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" ev"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("target"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("result"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("cursor"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("cursor"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    cursor"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("continue")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//call success again")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//end of record set")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br"),e("span",{staticClass:"line-number"},[t._v("9")]),e("br")])]),e("YouTube",{attrs:{title:"IDB Cursors - part 8",url:"https://www.youtube.com/embed/OoYWkTQjJdc"}}),t._v(" "),e("p",[e("RouterLink",{attrs:{to:"/modules/week9/"}},[t._v("Return to week home page")])],1)],1)}),[],!1,null,null,null);s.default=n.exports}}]);