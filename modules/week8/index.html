<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Week 8 - Web Workers &amp; Copying Objects | MAD9022-W21</title>
    <meta name="generator" content="VuePress 1.7.1">
    
    <meta name="description" content="Cross Platform Application Development II">
    
    <link rel="preload" href="/W2021/assets/css/0.styles.9c5fa8ba.css" as="style"><link rel="preload" href="/W2021/assets/js/app.5f620c32.js" as="script"><link rel="preload" href="/W2021/assets/js/2.58046445.js" as="script"><link rel="preload" href="/W2021/assets/js/61.c225e561.js" as="script"><link rel="preload" href="/W2021/assets/js/9.536c9148.js" as="script"><link rel="prefetch" href="/W2021/assets/js/10.3b8e81aa.js"><link rel="prefetch" href="/W2021/assets/js/11.da83352d.js"><link rel="prefetch" href="/W2021/assets/js/12.b7e62dfc.js"><link rel="prefetch" href="/W2021/assets/js/13.6eef42af.js"><link rel="prefetch" href="/W2021/assets/js/14.d9a3848c.js"><link rel="prefetch" href="/W2021/assets/js/15.9dbe3d80.js"><link rel="prefetch" href="/W2021/assets/js/16.34877f8a.js"><link rel="prefetch" href="/W2021/assets/js/17.42df5c8b.js"><link rel="prefetch" href="/W2021/assets/js/18.d6c2d19c.js"><link rel="prefetch" href="/W2021/assets/js/19.8f274ad4.js"><link rel="prefetch" href="/W2021/assets/js/20.ee15ddf1.js"><link rel="prefetch" href="/W2021/assets/js/21.040787d3.js"><link rel="prefetch" href="/W2021/assets/js/22.c1c08c07.js"><link rel="prefetch" href="/W2021/assets/js/23.24360df1.js"><link rel="prefetch" href="/W2021/assets/js/24.15b158c0.js"><link rel="prefetch" href="/W2021/assets/js/25.f6afa99c.js"><link rel="prefetch" href="/W2021/assets/js/26.e108e2ea.js"><link rel="prefetch" href="/W2021/assets/js/27.901ee059.js"><link rel="prefetch" href="/W2021/assets/js/28.aa362c99.js"><link rel="prefetch" href="/W2021/assets/js/29.03adf946.js"><link rel="prefetch" href="/W2021/assets/js/3.54197ee6.js"><link rel="prefetch" href="/W2021/assets/js/30.3b5bf566.js"><link rel="prefetch" href="/W2021/assets/js/31.e8f8cd55.js"><link rel="prefetch" href="/W2021/assets/js/32.3881a5bc.js"><link rel="prefetch" href="/W2021/assets/js/33.aec743e8.js"><link rel="prefetch" href="/W2021/assets/js/34.989038db.js"><link rel="prefetch" href="/W2021/assets/js/35.0103cacb.js"><link rel="prefetch" href="/W2021/assets/js/36.5cb7f62a.js"><link rel="prefetch" href="/W2021/assets/js/37.23dca0df.js"><link rel="prefetch" href="/W2021/assets/js/38.8d291227.js"><link rel="prefetch" href="/W2021/assets/js/39.7e01411f.js"><link rel="prefetch" href="/W2021/assets/js/4.bb14ba1f.js"><link rel="prefetch" href="/W2021/assets/js/40.a50e72d6.js"><link rel="prefetch" href="/W2021/assets/js/41.87e553d4.js"><link rel="prefetch" href="/W2021/assets/js/42.d17778b7.js"><link rel="prefetch" href="/W2021/assets/js/43.9ee0e615.js"><link rel="prefetch" href="/W2021/assets/js/44.a0384434.js"><link rel="prefetch" href="/W2021/assets/js/45.e12cab43.js"><link rel="prefetch" href="/W2021/assets/js/46.ff49787c.js"><link rel="prefetch" href="/W2021/assets/js/47.931a5164.js"><link rel="prefetch" href="/W2021/assets/js/48.93a1f250.js"><link rel="prefetch" href="/W2021/assets/js/49.ed2942b4.js"><link rel="prefetch" href="/W2021/assets/js/5.a7665843.js"><link rel="prefetch" href="/W2021/assets/js/50.36e0d8ca.js"><link rel="prefetch" href="/W2021/assets/js/51.d12854eb.js"><link rel="prefetch" href="/W2021/assets/js/52.698198e0.js"><link rel="prefetch" href="/W2021/assets/js/53.1b1c9b0c.js"><link rel="prefetch" href="/W2021/assets/js/54.1dbf137a.js"><link rel="prefetch" href="/W2021/assets/js/55.69963126.js"><link rel="prefetch" href="/W2021/assets/js/56.a3a2e578.js"><link rel="prefetch" href="/W2021/assets/js/57.cc80d260.js"><link rel="prefetch" href="/W2021/assets/js/58.efd50c39.js"><link rel="prefetch" href="/W2021/assets/js/59.0a02def4.js"><link rel="prefetch" href="/W2021/assets/js/6.a6f59c61.js"><link rel="prefetch" href="/W2021/assets/js/60.75b38a09.js"><link rel="prefetch" href="/W2021/assets/js/62.d734d751.js"><link rel="prefetch" href="/W2021/assets/js/63.732d87a3.js"><link rel="prefetch" href="/W2021/assets/js/64.95e1f72f.js"><link rel="prefetch" href="/W2021/assets/js/65.4086fe0e.js"><link rel="prefetch" href="/W2021/assets/js/7.30cb0167.js"><link rel="prefetch" href="/W2021/assets/js/8.0d49ee3f.js">
    <link rel="stylesheet" href="/W2021/assets/css/0.styles.9c5fa8ba.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/W2021/" class="home-link router-link-active"><!----> <span class="site-name">MAD9022-W21</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/W2021/overview/" class="nav-link">
  Overview
</a></div><div class="nav-item"><a href="/W2021/assignments/" class="nav-link">
  Deliverables
</a></div><div class="nav-item"><a href="/W2021/resources/" class="nav-link">
  Resources
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/W2021/overview/" class="nav-link">
  Overview
</a></div><div class="nav-item"><a href="/W2021/assignments/" class="nav-link">
  Deliverables
</a></div><div class="nav-item"><a href="/W2021/resources/" class="nav-link">
  Resources
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Content Modules</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/W2021/modules/week1/" class="sidebar-link">Week 1 - Cordova, CSP, NPM</a></li><li><a href="/W2021/modules/week2/" class="sidebar-link">Week 2 - Cordova Android, Classes, ENV</a></li><li><a href="/W2021/modules/week3/" class="sidebar-link">Week 3 - Destructuring, Async, Cordova Camera</a></li><li><a href="/W2021/modules/week4/" class="sidebar-link">Week 4 - Cordova File, SplashScreen, Icons</a></li><li><a href="/W2021/modules/week5/" class="sidebar-link">Week 5 - Iterators, Generators, Maps, Sets, iPhone-X</a></li><li><a href="/W2021/modules/week6/" class="sidebar-link">Week 6 - Cordova Media, CORS</a></li><li><a href="/W2021/modules/week7/" class="sidebar-link">Week 7 - Cordova</a></li><li><a href="/W2021/modules/week8/" aria-current="page" class="active sidebar-link">Week 8 - Web Workers &amp; Copying Objects</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/W2021/modules/week8/#shared-web-workers" class="sidebar-link">Shared Web Workers</a></li><li class="sidebar-sub-header"><a href="/W2021/modules/week8/#deep-vs-shallow-copying" class="sidebar-link">Deep vs Shallow Copying</a></li></ul></li><li><a href="/W2021/modules/week9/" class="sidebar-link">Week 9 - IndexedDB &amp; Service Workers</a></li><li><a href="/W2021/modules/week10/" class="sidebar-link">Week 10 - PWA Core</a></li><li><a href="/W2021/modules/week11/" class="sidebar-link">Week 11 - PWA Continued</a></li><li><a href="/W2021/modules/week12/" class="sidebar-link">Week 12 - Caching and Custom Protocols</a></li><li><a href="/W2021/modules/week13/" class="sidebar-link">Week 13 - CORS in Detail</a></li><li><a href="/W2021/modules/week14/" class="sidebar-link">Week 14 - Final Project</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Deliverables</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="week-8-web-workers-copying-objects"><a href="#week-8-web-workers-copying-objects" class="header-anchor">#</a> Week 8 - Web Workers &amp; Copying Objects</h1> <h2 id="shared-web-workers"><a href="#shared-web-workers" class="header-anchor">#</a> Shared Web Workers</h2> <p>By now we are very familiar with the idea that JavaScript runs the main stack on a single thread. This means that the main stack runs in a synchronous way - one task at a time.</p> <p>We do have asynchronous things like Events, Timers, and Promises which will be placed on another thread to be handled. When they are ready to be used they get put in a queue to wait to be added back onto the main stack. They can only be added back onto the main stack when it is empty and all the current tasks are complete.</p> <p>So, if you have a processor intensive task to complete but it isn't connected to a Promise, Timer, or Event then you are stuck with the main stack not able to do anything until it finishes this big task. Updating the interface and interacting with the user in a real-time way could be jeopardized.</p> <p>The solution? Shared Web Workers. With these, we can actually create our own new thread to use and run our complex task on that other thread. Our main stack will, once again, be free to work with the interface and the user.</p> <p>Shared Web Workers can contain practically any code we want, except it is not allow to access the DOM (the interface).</p> <div title="intro to web workers" class="video-player"><iframe width="560" height="315" src="https://www.youtube.com/embed/EiPytIxrZtU" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="allowfullscreen"></iframe></div> <p>There is another category of Workers called Service Workers. We will be talking about these more starting next week. They are even more powerful than Shared Web Workers and will allow us to do things like build web apps that can run offline.</p> <h2 id="deep-vs-shallow-copying"><a href="#deep-vs-shallow-copying" class="header-anchor">#</a> Deep vs Shallow Copying</h2> <p>In JavaScript, the Primitives are passed to functions and methods as a value. Objects are passed to functions and methods as a reference.</p> <p>That means, when you are using Objects or Arrays, which contain objects or arrays, and you pass them to a function or method that creates a copy of the contents you may still be dealing with the original contents. Primitive values will always be actually new copies of the values. The objects will always be references.</p> <p>Let's look at an example to understand this better.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//start with object A with two properties which contain a primitive and an object</span>
<span class="token keyword">let</span> objA <span class="token operator">=</span> <span class="token punctuation">{</span>
  num<span class="token operator">:</span> <span class="token number">3.14</span><span class="token punctuation">,</span>
  names<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'Steve'</span><span class="token punctuation">,</span> <span class="token string">'Rashad'</span><span class="token punctuation">,</span> <span class="token string">'Robert'</span><span class="token punctuation">,</span> <span class="token string">'Tony'</span><span class="token punctuation">,</span> <span class="token string">'Su Cheng'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">//now we want a new object that has the same contents</span>
<span class="token comment">//we will do this in steps to understand it better</span>
<span class="token keyword">let</span> objB <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">//copy the number from object A to object B</span>
objB<span class="token punctuation">.</span>num <span class="token operator">=</span> objA<span class="token punctuation">.</span>num<span class="token punctuation">;</span>
<span class="token comment">//copy the names from object A to object B</span>
objB<span class="token punctuation">.</span>names <span class="token operator">=</span> objA<span class="token punctuation">.</span>names<span class="token punctuation">;</span>
<span class="token comment">//display object B and you will see that it has the same contents as object A</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>objB<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//Now... say a change is made to Object A</span>
objA<span class="token punctuation">.</span>num <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span>
objA<span class="token punctuation">.</span>names<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'Vladimir'</span><span class="token punctuation">;</span>

<span class="token comment">//and look at object B again</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>objB<span class="token punctuation">.</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//still 3.14</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>objB<span class="token punctuation">.</span>names<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Hey! Where did Rashad go?</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><p>This highlights how important it is to understand how objects and primitives are handled differently. The names array in object B (from the example above) points to the same array in memory as the one inside object A.</p> <p>This is NOT a problem. This is NOT an issue with how JavaScipt runs. This is <strong>shallow copying</strong>. It is a predictable and consistent behaviour which actually makes efficient use of memory. We just need to know how to create real copies of objects for the times we need them.</p> <p>For more examples of how this works and to see the ways of doing <strong>deep copying</strong></p> <div title="deep vs shallow copying" class="video-player"><iframe width="560" height="315" src="https://www.youtube.com/embed/duyshh9Fs1U" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="allowfullscreen"></iframe></div> <div class="custom-block warning"><p class="custom-block-title">TODO</p> <ul><li>Read the content and watch the videos for Weeks 8 and 9</li> <li>Finish and submit <strong>Cordova PlayR project</strong></li> <li>Prepare for <a href="/W2021/assignments/exer/">the fourth timed exercise</a></li></ul></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">1/22/2021, 9:54:40 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/W2021/modules/week7/" class="prev">
        Week 7 - Cordova
      </a></span> <span class="next"><a href="/W2021/modules/week9/">
        Week 9 - IndexedDB &amp; Service Workers
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/W2021/assets/js/app.5f620c32.js" defer></script><script src="/W2021/assets/js/2.58046445.js" defer></script><script src="/W2021/assets/js/61.c225e561.js" defer></script><script src="/W2021/assets/js/9.536c9148.js" defer></script>
  </body>
</html>
