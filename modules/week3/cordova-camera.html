<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Cordova Camera Plugin | MAD9022-W21</title>
    <meta name="generator" content="VuePress 1.7.1">
    
    <meta name="description" content="Cross Platform Application Development II">
    
    <link rel="preload" href="/W2021/assets/css/0.styles.9c5fa8ba.css" as="style"><link rel="preload" href="/W2021/assets/js/app.5f620c32.js" as="script"><link rel="preload" href="/W2021/assets/js/2.58046445.js" as="script"><link rel="preload" href="/W2021/assets/js/44.a0384434.js" as="script"><link rel="preload" href="/W2021/assets/js/9.536c9148.js" as="script"><link rel="prefetch" href="/W2021/assets/js/10.3b8e81aa.js"><link rel="prefetch" href="/W2021/assets/js/11.da83352d.js"><link rel="prefetch" href="/W2021/assets/js/12.b7e62dfc.js"><link rel="prefetch" href="/W2021/assets/js/13.6eef42af.js"><link rel="prefetch" href="/W2021/assets/js/14.d9a3848c.js"><link rel="prefetch" href="/W2021/assets/js/15.9dbe3d80.js"><link rel="prefetch" href="/W2021/assets/js/16.34877f8a.js"><link rel="prefetch" href="/W2021/assets/js/17.42df5c8b.js"><link rel="prefetch" href="/W2021/assets/js/18.d6c2d19c.js"><link rel="prefetch" href="/W2021/assets/js/19.8f274ad4.js"><link rel="prefetch" href="/W2021/assets/js/20.ee15ddf1.js"><link rel="prefetch" href="/W2021/assets/js/21.040787d3.js"><link rel="prefetch" href="/W2021/assets/js/22.c1c08c07.js"><link rel="prefetch" href="/W2021/assets/js/23.24360df1.js"><link rel="prefetch" href="/W2021/assets/js/24.15b158c0.js"><link rel="prefetch" href="/W2021/assets/js/25.f6afa99c.js"><link rel="prefetch" href="/W2021/assets/js/26.e108e2ea.js"><link rel="prefetch" href="/W2021/assets/js/27.901ee059.js"><link rel="prefetch" href="/W2021/assets/js/28.aa362c99.js"><link rel="prefetch" href="/W2021/assets/js/29.03adf946.js"><link rel="prefetch" href="/W2021/assets/js/3.54197ee6.js"><link rel="prefetch" href="/W2021/assets/js/30.3b5bf566.js"><link rel="prefetch" href="/W2021/assets/js/31.e8f8cd55.js"><link rel="prefetch" href="/W2021/assets/js/32.3881a5bc.js"><link rel="prefetch" href="/W2021/assets/js/33.aec743e8.js"><link rel="prefetch" href="/W2021/assets/js/34.989038db.js"><link rel="prefetch" href="/W2021/assets/js/35.0103cacb.js"><link rel="prefetch" href="/W2021/assets/js/36.5cb7f62a.js"><link rel="prefetch" href="/W2021/assets/js/37.23dca0df.js"><link rel="prefetch" href="/W2021/assets/js/38.8d291227.js"><link rel="prefetch" href="/W2021/assets/js/39.7e01411f.js"><link rel="prefetch" href="/W2021/assets/js/4.bb14ba1f.js"><link rel="prefetch" href="/W2021/assets/js/40.a50e72d6.js"><link rel="prefetch" href="/W2021/assets/js/41.87e553d4.js"><link rel="prefetch" href="/W2021/assets/js/42.d17778b7.js"><link rel="prefetch" href="/W2021/assets/js/43.9ee0e615.js"><link rel="prefetch" href="/W2021/assets/js/45.e12cab43.js"><link rel="prefetch" href="/W2021/assets/js/46.ff49787c.js"><link rel="prefetch" href="/W2021/assets/js/47.931a5164.js"><link rel="prefetch" href="/W2021/assets/js/48.93a1f250.js"><link rel="prefetch" href="/W2021/assets/js/49.ed2942b4.js"><link rel="prefetch" href="/W2021/assets/js/5.a7665843.js"><link rel="prefetch" href="/W2021/assets/js/50.36e0d8ca.js"><link rel="prefetch" href="/W2021/assets/js/51.d12854eb.js"><link rel="prefetch" href="/W2021/assets/js/52.698198e0.js"><link rel="prefetch" href="/W2021/assets/js/53.1b1c9b0c.js"><link rel="prefetch" href="/W2021/assets/js/54.1dbf137a.js"><link rel="prefetch" href="/W2021/assets/js/55.69963126.js"><link rel="prefetch" href="/W2021/assets/js/56.a3a2e578.js"><link rel="prefetch" href="/W2021/assets/js/57.cc80d260.js"><link rel="prefetch" href="/W2021/assets/js/58.efd50c39.js"><link rel="prefetch" href="/W2021/assets/js/59.0a02def4.js"><link rel="prefetch" href="/W2021/assets/js/6.a6f59c61.js"><link rel="prefetch" href="/W2021/assets/js/60.75b38a09.js"><link rel="prefetch" href="/W2021/assets/js/61.c225e561.js"><link rel="prefetch" href="/W2021/assets/js/62.d734d751.js"><link rel="prefetch" href="/W2021/assets/js/63.732d87a3.js"><link rel="prefetch" href="/W2021/assets/js/64.95e1f72f.js"><link rel="prefetch" href="/W2021/assets/js/65.4086fe0e.js"><link rel="prefetch" href="/W2021/assets/js/7.30cb0167.js"><link rel="prefetch" href="/W2021/assets/js/8.0d49ee3f.js">
    <link rel="stylesheet" href="/W2021/assets/css/0.styles.9c5fa8ba.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/W2021/" class="home-link router-link-active"><!----> <span class="site-name">MAD9022-W21</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/W2021/overview/" class="nav-link">
  Overview
</a></div><div class="nav-item"><a href="/W2021/assignments/" class="nav-link">
  Deliverables
</a></div><div class="nav-item"><a href="/W2021/resources/" class="nav-link">
  Resources
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/W2021/overview/" class="nav-link">
  Overview
</a></div><div class="nav-item"><a href="/W2021/assignments/" class="nav-link">
  Deliverables
</a></div><div class="nav-item"><a href="/W2021/resources/" class="nav-link">
  Resources
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Content Modules</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/W2021/modules/week1/" class="sidebar-link">Week 1 - Cordova, CSP, NPM</a></li><li><a href="/W2021/modules/week2/" class="sidebar-link">Week 2 - Cordova Android, Classes, ENV</a></li><li><a href="/W2021/modules/week3/" aria-current="page" class="sidebar-link">Week 3 - Destructuring, Async, Cordova Camera</a></li><li><a href="/W2021/modules/week4/" class="sidebar-link">Week 4 - Cordova File, SplashScreen, Icons</a></li><li><a href="/W2021/modules/week5/" class="sidebar-link">Week 5 - Iterators, Generators, Maps, Sets, iPhone-X</a></li><li><a href="/W2021/modules/week6/" class="sidebar-link">Week 6 - Cordova Media, CORS</a></li><li><a href="/W2021/modules/week7/" class="sidebar-link">Week 7 - Cordova</a></li><li><a href="/W2021/modules/week8/" class="sidebar-link">Week 8 - Web Workers &amp; Copying Objects</a></li><li><a href="/W2021/modules/week9/" class="sidebar-link">Week 9 - IndexedDB &amp; Service Workers</a></li><li><a href="/W2021/modules/week10/" class="sidebar-link">Week 10 - PWA Core</a></li><li><a href="/W2021/modules/week11/" class="sidebar-link">Week 11 - PWA Continued</a></li><li><a href="/W2021/modules/week12/" class="sidebar-link">Week 12 - Caching and Custom Protocols</a></li><li><a href="/W2021/modules/week13/" class="sidebar-link">Week 13 - CORS in Detail</a></li><li><a href="/W2021/modules/week14/" class="sidebar-link">Week 14 - Final Project</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Deliverables</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="cordova-camera-plugin"><a href="#cordova-camera-plugin" class="header-anchor">#</a> Cordova Camera Plugin</h1> <p>Cordova has a Camera plugin that allows us to use JavaScript to take and save pictures and videos from our webpages. The plugin we need to add is:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>cordova plugin add cordova-plugin-camera
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>There are not that many methods and properties to learn. However, there are a few gotchas and things to be aware of.</p> <p>First, iOS Simulators will <strong>NOT</strong> allow you to access the camera.</p> <p>Second, be aware that there are two similarly named Objects in the plugin. <code>camera</code> and <code>Camera</code> are both objects but they have different purposes.</p> <p>If you are working with iOS then you need to be careful about the additional permissions that are required for the plugin. See the second video below for details on this.</p> <p><a href="https://cordova.apache.org/docs/en/latest/reference/cordova-plugin-camera/index.html" target="_blank" rel="noopener noreferrer">Camera Plugin Reference<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div title="Cordova Camera Plugin" class="video-player"><iframe width="560" height="315" src="https://www.youtube.com/embed/jlL1RuW9Kiw" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="allowfullscreen"></iframe></div> <p><a href="https://gist.github.com/prof3ssorSt3v3/75092fbba5428fb9369fa02b75fa73b2" target="_blank" rel="noopener noreferrer">Code Gist from the Camera video<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div title="Cordova Camera Permissions for iOS" class="video-player"><iframe width="560" height="315" src="https://www.youtube.com/embed/mMgjaPeof5c" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="allowfullscreen"></iframe></div> <p>Here is the sample permission install that you need for iOS. Note that there are two permissions. The first one is for general use of the Camera. The second is for being able to access the PhotoLibrary.</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>cordova plugin add cordova-plugin-camera --variable CAMERA_USAGE_DESCRIPTION=&quot;your usage message&quot;  --variable PHOTOLIBRARY_USAGE_DESCRIPTION=&quot;your usage message&quot;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>The commands above will add that information into the project package.json file. However, since iOS 10 and XCode 13 we need to edit the <code>info.plist</code> file in the project. We can do this manually through XCode, OR, more easily we can add the following to the <code>config.xml</code> file.</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>edit-config</span> <span class="token attr-name">target</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>NSCameraUsageDescription<span class="token punctuation">&quot;</span></span> <span class="token attr-name">file</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>*-Info.plist<span class="token punctuation">&quot;</span></span> <span class="token attr-name">mode</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>merge<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>string</span><span class="token punctuation">&gt;</span></span>need camera access to take pictures<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>string</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>edit-config</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>edit-config</span> <span class="token attr-name">target</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>NSPhotoLibraryUsageDescription<span class="token punctuation">&quot;</span></span> <span class="token attr-name">file</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>*-Info.plist<span class="token punctuation">&quot;</span></span> <span class="token attr-name">mode</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>merge<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>string</span><span class="token punctuation">&gt;</span></span>need photo library access to get pictures from there<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>string</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>edit-config</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>Put the above snippet into the <code>config.xml</code> file, inside the <code>&lt;platform name=&quot;ios&quot;&gt;</code> section.</p> <h2 id="saving-the-camera-image"><a href="#saving-the-camera-image" class="header-anchor">#</a> Saving the Camera Image</h2> <p>After you take a picture with the Android Emulator Camera, if you have selected <code>Camera.destinationType.FILE_URI</code> as the result from calling the camera, then you will get back a string that looks something like this:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>file:///storage/emulated/0/Android/data/ca.edumedia.griffis.cordcam/cache/1548683871642.jpg
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>Things to note about this path:</p> <ul><li>it starts with <code>file:///</code>.</li> <li>Your <code>package name</code> is part of the path. This is where your application is installed on the device / emulator.</li> <li>The <code>cache</code> folder is where it is saved by default.</li> <li>If you have the <code>cordova-plugin-file</code> installed then you can use <code>cordova.file.cacheDirectory</code> as a reference property for that cache folder.</li> <li>To permanently store images or videos or other files we would use <code>cordova.file.dataDirectory</code> as the folder which is private to the application but considered permanent storage.</li></ul> <h2 id="sample-options-for-the-camera"><a href="#sample-options-for-the-camera" class="header-anchor">#</a> Sample Options for the Camera</h2> <p>When you are calling the <code>getPicture()</code> method there are lots of possible options that you can pass to the method as the third parameter. Here is a sample.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> options <span class="token operator">=</span> <span class="token punctuation">{</span>
  quality<span class="token operator">:</span> <span class="token number">80</span><span class="token punctuation">,</span>
  destinationType<span class="token operator">:</span> Camera<span class="token punctuation">.</span>DestinationType<span class="token punctuation">.</span><span class="token constant">FILE_URI</span><span class="token punctuation">,</span>
  encodingType<span class="token operator">:</span> Camera<span class="token punctuation">.</span>EncodingType<span class="token punctuation">.</span><span class="token constant">PNG</span><span class="token punctuation">,</span>
  mediaType<span class="token operator">:</span> Camera<span class="token punctuation">.</span>MediaType<span class="token punctuation">.</span><span class="token constant">PICTURE</span><span class="token punctuation">,</span>
  sourceType<span class="token operator">:</span> Camera<span class="token punctuation">.</span>PictureSourceType<span class="token punctuation">.</span><span class="token constant">CAMERA</span><span class="token punctuation">,</span>
  allowEdit<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  targetWidth<span class="token operator">:</span> <span class="token number">300</span><span class="token punctuation">,</span>
  targetHeight<span class="token operator">:</span> <span class="token number">300</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h2 id="potential-issues"><a href="#potential-issues" class="header-anchor">#</a> Potential Issues</h2> <p>When taking a picture on Android, it is possible for some devices to lack sufficient memory to keep your app in the background while taking and saving a picture.</p> <p>All Cordova apps have <code>pause</code> and <code>resume</code> events that we can listen for. When an app is shut down by the user or the system it will fire the <code>pause</code> event. When it is brought back to life, the <code>resume</code> event will fire.</p> <p>For Cameras taking pictures it means we might need to use the resume event to capture the image coming back from the Camera app and then pass it to our Camera success callback ourselves.</p> <p>Here is <a href="https://cordova.apache.org/docs/en/dev/guide/platforms/android/index.html#example" target="_blank" rel="noopener noreferrer">an example of this code<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div title="Cordova pause and resume events" class="video-player"><iframe width="560" height="315" src="https://www.youtube.com/embed/FfYXu-lhQ_A" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="allowfullscreen"></iframe></div> <h3 id="additional-issue-on-ios"><a href="#additional-issue-on-ios" class="header-anchor">#</a> Additional Issue on iOS</h3> <p>There is also a method on iOS that you can call to clean up temporary image files that may have been created when you are taking a pictures and returning a file URI.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>navigator<span class="token punctuation">.</span>camera<span class="token punctuation">.</span><span class="token function">cleanup</span><span class="token punctuation">(</span>successCallback<span class="token punctuation">,</span> errorCallback<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="return"><a href="#return" class="header-anchor">#</a> Return</h2> <p><a href="/W2021/modules/week3/" class="router-link-active">Back to Week 4 Module Home</a></p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">1/7/2021, 4:55:43 PM</span></div></footer> <!----> </main></div><div class="global-ui"><!----></div></div>
    <script src="/W2021/assets/js/app.5f620c32.js" defer></script><script src="/W2021/assets/js/2.58046445.js" defer></script><script src="/W2021/assets/js/44.a0384434.js" defer></script><script src="/W2021/assets/js/9.536c9148.js" defer></script>
  </body>
</html>
